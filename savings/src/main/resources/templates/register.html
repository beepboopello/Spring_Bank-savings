<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <title>Đăng ký</title>
</head>
<script>
    function register() {
        let data = {
            'stk': document.getElementById("id_stk").value,
            username: document.getElementById("id_username").value,
            password: document.getElementById("id_password").value
        };
        fetch("/api/client/add", {
            method: "POST",
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        }).then(res => {
            console.log(res);
        })
        document.getElementById("id_hiddenverify").style.display = 'none';
        document.getElementById("div_otp").style.display = 'block';

        document.getElementById("id_btn_register").style.display = 'none';
        document.getElementById("id_btn_verify").style.display = 'block';

    }

    function verify() {
        let data = { stk: document.getElementById("id_stk").value, otp: document.getElementById("id_otp").value };
        fetch("/api/client/verify", {
            method: "POST",
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        }).then(res => {
            console.log(res);
        })
    }
</script>

<body>
    <div class="container" style="margin-top: 50px;">
        <div class="row"
            style="border: 1px darkgrey solid; border-radius: 10px;width: 50%; margin: 0 auto; padding: 20px;">
            <div class="col-sm-12">
                <h3>Đăng ký để sử dụng dịch vụ ngân hàng</h3>
                <!-- <form action="login" method="post"> -->

                <div class="form-group">
                    <label>Số tài khoản đuợc cấp</label>
                    <input id="id_stk" type="text" class="form-control" name="username" placeholder="Nhập số tài khoản">
                </div>
                <div id="id_hiddenverify">
                    <div class="form-group">
                        <label>Tên đăng nhập</label>
                        <input id="id_username" type="text" class="form-control" name="username"
                            placeholder="Nhập tên đăng nhập">
                    </div>
                    <div class="form-group">
                        <label>Mật khẩu</label>
                        <input id="id_password" type="password" class="form-control" name="password"
                            placeholder="Nhập mật khẩu">
                    </div>
                </div>
                <div id="div_otp" class="form-group" style="display :none">
                    <label>Mã OTP</label>
                    <input id="id_otp" type="text" class="form-control" name="otp" placeholder="Nhập mã otp">
                </div>
                <div class="checkbox">
                    <label><input type="checkbox"> Remember me</label>
                </div>
                <p style="color: red" th:text="${error}"></p>
                <button id="id_btn_register" onclick="register()" class="btn btn-primary">Đăng ký</button>
                <button id="id_btn_verify" onclick="verify()" style="display: none" class="btn btn-primary">Xác nhận</button>
                <!-- </form> -->
            </div>
        </div>
    </div>
</body>

</html>